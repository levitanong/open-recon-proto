<!DOCTYPE HTML>
<html ng-app="recon">
<head>

	<link rel="stylesheet" type="text/css" href="bower_components/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="styles/css/style.css">

	<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
	<script type="text/javascript" src="scripts/script.js"></script>
	
</head>
<body ng-controller="Main">

<!-- nav -->
<nav class="top-bar">
	<ul class="title-area">
		<li class="name">
			<h1>
				<a href="#" ng-click="setView('List')">Open Reconstruction</a>
			</h1>
		</li>
	</ul>
	<section class="top-bar-section">
		<ul class="right">
			<li>
				<a ng-click="sampleData.genReqList(10)">Generate Sample Data</a>
			</li>
			<li>
				<a ng-click="setView('Account')">{{curUser.name}}</a>
			</li>
		</ul>
	</section>
</nav>

<!-- main -->
<div ng-controller="List" ng-if="curView == 'List'">
	<section>
		<div class="row">
			<h1>
				List of Requests
			</h1>
			<button class="button" ng-click="setView('New')">
				new
			</button>
		</div>
	</section>
	<section>
		<div class="row">
			<ul>
				<li ng-repeat="req in reqList">
					{{req.date | date:'MMM d'}}
					{{req.code}}
					{{req.disaster.type}}
					{{req.project.type}}
					{{req.project.description}}
					{{req.amount | number}}
				</li>
			</ul>
		</div>
	</section>
</div>

<!-- new request -->
<div ng-controller="New" ng-if="curView == 'New'">
	<section>
		<div class="row">
			<div class="columns large-12">
				<h1>
					New Request
				</h1>
			</div>
		</div>
	</section>
	<section>
		<form ng-submit="submit()">
			<div class="row">
				<div class="columns large-8">
					<fieldset>
						<legend>
							Disaster
						</legend>
						<label>
							Type
							<select ng-model="getCurReq().disaster.type" ng-options="type for type in types.disaster">
							</select>
						</label>
						<label>
							Name
							<input type="text" ng-model="getCurReq().disaster.name" />

						</label>
						<label ng-if="getCurReq().disaster.type == 'Anthropogenic'">
							Cause
							<input type="text"  ng-model="getCurReq().disaster.cause" />
						</label>
					</fieldset>
					<fieldset>
						<legend>
							Project
						</legend>
						<label>
							Project Type
							<select ng-model="getCurReq().project.type" ng-options="type for type in types.project">
							</select>
						</label>
						<label>
							Description
							<textarea ng-model="getCurReq().project.description"></textarea>
						</label>
						<label>
							Requested Amount
							<input type="number" ng-model="getCurReq().amount" />
						</label>
					</fieldset>
					<!-- <label>
						Upload Attachments
					</label> -->
					<button class="button">
						Submit
					</button>
					<button class="button alert" ng-click="setView('List')">
						Cancel
					</button>
				</div>
			</div>
		</form>
	</section>
</div>

<!-- account -->
<div ng-controller="Account" ng-if="curView == 'Account'">
	<section>
		<div class="row">
			<h1>Hi, {{curUser.name}}!</h1>
			<div ng-repeat="(key, value) in curUser.address" ng-show="value">
				{{key}}: {{value}}
			</div>
		</div>
	</section>
</div>

</body>
</html>